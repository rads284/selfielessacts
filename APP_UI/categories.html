<html>

<head>

  <title>Categories</title>

    <link href="css/categories.css" rel="stylesheet">
    <!-- Custom Fonts from Google -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

</head>

<body>
		<h1 class="title">CATEGORIES</h1>
    <a href="index.html" class="home">Home</a>
		<ul class="rolldown-list" id="myList">
		   <!-- <li><span class="category">Society</span> <span class="noOfPosts">(10)</span></li>
		  <li><span class="category">Personal</span> <span class="noOfPosts">(5)</span></li>
		  <li><span class="category">Environment</span> <span class="noOfPosts">(16)</span></li>
  -->
		</ul>
    <div class="categoryFunctions">
        <form class ="addCat">
          <p style="text-align:center">ADD CATEGORY:</p>
          <p>Category  :  <input type="text" class="categoryName" id="addCategoryName"placeholder="Category Name"/>
          <button class="addCategory">Add</button>
        </form>
        <form class ="remCat">
          <p style="text-align:center">REMOVE CATEGORY:</p>
          <p>Category  :  <input type="text" class="categoryName" id="remCategoryName" placeholder="Category Name"/>
          <button class="remCategory">Remove</button>
        </form>
        <form class="filterPosts">
          <p style="text-align:center">FILTER POSTS BY INDEX:</p>
          <p>Start Index:  <input type="text" class="startIndex" /></p>
          <p>End Index   :  <input type="text" class="endIndex"/></p>
          <p>Category    :  <input type="text" class="categoryName" id="dispCategoryName" placeholder="Category Name"/></p>

          <button class="displayPosts">Display Posts</button>

        </form>
    </div>



</body>
</html>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script>
   $(window).load(function(){
        console.log("load");
        $.get("http://localhost:3000/api/v1/categories")
         .done(function(data){
             console.log("GET");
             console.log(data);

             for(var item in data){
                $("#myList").append("<li><span class='category'>"+item+"</span><span class='noOfPosts'>("+
                  data[item]+")</li>");
                //   $("select.category").append("<option value="+item+">"+item+"</option>");
                 console.log(item,data[item]);
             }
         });
    });
   $(".addCategory").click(function(){
    var requestJson = [$("#addCategoryName").val()];
    var url = "http://localhost:3000/api/v1/categories";
    $.ajax({
      'type':"POST",
      'url': url,
      'contentType':'application/json',
      'data' : JSON.stringify(requestJson),
      'dataType' : 'json',
    });
   });
   $(".remCategory").click(function(){
    var url = "http://localhost:3000/api/v1/categories/" + $("#remCategoryName").val();
    $.ajax({
      'type':"DELETE",
      'url': url,
    })
   });
   // $(".displayPosts").click(function(){
   //  var url = "http://localhost:3000/api/v1/categories/" + $("#dispCategoryName").val() + "/acts";
   //  $.get(url)
   // });
</script>
